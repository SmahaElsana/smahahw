pool:
  name: smahapool

steps:
- task: AzureCLI@2
  displayName: 'Connect to Azure Storage'
  inputs:
    azureSubscription: 'smahacon'
    scriptType: 'bash'
    scriptLocation: 'inlineScript'
    inlineScript: |
      # Set the storage account variables
      storageAccountName='smahastorage1111'
      storageContainerName='container1'

      # Get the storage account connection string
      storageConnectionString=$(az storage account show-connection-string --name $storageAccountName --query connectionString --output tsv)

      # Create 10 blobs in a loop
      for ((i=1; i<=10; i++))
      do
        blobName="blob$i.txt"
        blobContent="This is blob $i"
        az storage blob upload --connection-string $storageConnectionString --container-name $storageContainerName --name $blobName --type block --content "$blobContent"
      done
